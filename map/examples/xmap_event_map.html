<html>
  <head>
    <script src="../lib/xmap.min.js"></script>
    <style>
      * {
        padding: 0;
        margin: 0;
      }
      #xmap {
        width: 100%;
        height: 100%;
      }
    </style>
  </head>
  <body>
    <div id="xmap"></div>
    <script>
      window.onload = function() {
        var map = new XMap.Map("#xmap", {});
        map.load("../files/data.json");
        let l;
        // 添加点击事件
        map.on(
          "click",
          (l = event => {
            map.off("click", l); // 移除点击事件
            let location = new XMap.Location(event.floor, event.x, event.y);
            let marker = new XMap.Marker(location, {
              icon: "img/marker_red_sprite.png",
              size: new XMap.Point(19, 25),
              offset: new XMap.Point(0, -12.5)
            });
            map.addOverlay(marker);
          })
        );
      };
    </script>
  </body>
</html>
